<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="bookshelfDAO">
 	
 	
 	<!-- 인기 도서 리스트-->
 	<select id="starlist" resultType="bookshelf">
 	SELECT * FROM ( SELECT bookshelf.isbn FROM bookshelf 
	INNER JOIN appraisal ON bookshelf.book_status_num = appraisal.book_status_num 
	GROUP BY bookshelf.isbn  ORDER BY AVG(appraisal.star) DESC) 
	<![CDATA[WHERE ROWNUM <= 3]]>
 	</select>
 	<!-- '<' TAG로 인식  부등호가 문자열이라는 것의 인식하게 해야 한다. <![CDATA[내용]]> 사용 -->
 	
</mapper>